{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = function () {\n  return [\"/register\"];\n};\nconst _c1 = function () {\n  return [\"/\"];\n};\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    togglePassword($event) {\n      const togglePassword = document.querySelector('#showpassword');\n      const password = document.querySelector('#password');\n      const type = password.getAttribute('type') === 'password' ? 'text' : 'password';\n      password.setAttribute('type', type);\n    }\n    CustomerLogin(regForm) {\n      const data = JSON.stringify(this.model);\n      //console.log(data)\n      this.http.post('http://localhost:4000/user/login', data, {\n        headers: new HttpHeaders({\n          'Content-Type': 'application/json'\n        })\n      }).subscribe(res => {\n        this.result = res;\n        if (this.result.code == 3000 && this.result.data.length != 0) {\n          //成功返回的code\n          //console.log(this.result.data)\n          localStorage.setItem('user', JSON.stringify(this.result.data));\n          var stored = JSON.parse(localStorage.getItem('user')); //Add !\n          //console.log(stored)\n          this.router.navigate(['/']);\n        } else {\n          this.alert = \"Invalid Email or Password\";\n        }\n      });\n    }\n    constructor(http, router, route) {\n      this.http = http;\n      this.router = router;\n      this.route = route;\n      this.model = {};\n      this.result = {};\n      this.alert = \"\";\n    }\n    ngOnInit() {\n      window.scrollTo(0, 0);\n    }\n  }\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 35,\n    vars: 8,\n    consts: [[1, \"hold-transition\", \"login-page\"], [1, \"login-box\"], [1, \"login-logo\"], [\"src\", \"../../../assets/img/bootstrap-logo.svg\", \"alt\", \"\", \"width\", \"72\", \"height\", \"57\", 1, \"mb-4\"], [1, \"card\"], [1, \"card-body\", \"login-card-body\"], [1, \"login-box-msg\"], [3, \"ngSubmit\"], [\"regForm\", \"ngForm\"], [1, \"input-group\", \"mb-3\"], [\"type\", \"email\", \"placeholder\", \"Email\", \"id\", \"email\", \"name\", \"email\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"input-group-append\"], [1, \"input-group-text\"], [1, \"fas\", \"fa-envelope\"], [\"type\", \"password\", \"placeholder\", \"Password\", \"id\", \"password\", \"name\", \"password\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"id\", \"showpassword\", \"name\", \"showpassword\", 1, \"fas\", \"fa-eye\", 3, \"click\"], [1, \"row\"], [1, \"col-8\"], [1, \"icheck-primary\"], [2, \"color\", \"red\"], [1, \"col-4\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-block\", 3, \"disabled\"], [1, \"mb-1\"], [1, \"mb-2\"], [1, \"text-center\", 3, \"routerLink\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r1 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵelement(3, \"img\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 4)(5, \"div\", 5)(6, \"p\", 6);\n        i0.ɵɵtext(7, \"Please sign in\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"form\", 7, 8);\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_8_listener() {\n          i0.ɵɵrestoreView(_r1);\n          const _r0 = i0.ɵɵreference(9);\n          return i0.ɵɵresetView(ctx.CustomerLogin(_r0));\n        });\n        i0.ɵɵelementStart(10, \"div\", 9)(11, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_11_listener($event) {\n          return ctx.model.email = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 11)(13, \"div\", 12);\n        i0.ɵɵelement(14, \"span\", 13);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(15, \"div\", 9)(16, \"input\", 14);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_16_listener($event) {\n          return ctx.model.password = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 11)(18, \"div\", 12)(19, \"span\", 15);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_span_click_19_listener($event) {\n          return ctx.togglePassword($event);\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(20, \"div\", 16)(21, \"div\", 17)(22, \"div\", 18)(23, \"span\", 19);\n        i0.ɵɵtext(24);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(25, \"div\", 20)(26, \"button\", 21);\n        i0.ɵɵtext(27, \"Sign In\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelement(28, \"p\", 22);\n        i0.ɵɵelementStart(29, \"p\", 23)(30, \"a\", 24);\n        i0.ɵɵtext(31, \"Register\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(32, \"p\", 23)(33, \"a\", 24);\n        i0.ɵɵtext(34, \"Back\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(9);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngModel\", ctx.model.email);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.model.password);\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate(ctx.alert);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", !_r0.form.valid);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(6, _c0));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(7, _c1));\n      }\n    },\n    dependencies: [i2.RouterLink, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}